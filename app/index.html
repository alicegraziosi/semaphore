<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="myApp" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="keywords" content="semantic web technologies linked open data LOD visualization">
  <meta name="description" content="semantic web technologies project">
  <meta name="author" content="Alice Graziosi">

  <!-- nome app web e icona -->
  <title>{{appName}} - {{subtitle}}</title>
  <link rel="shortcut icon" href="favicon.ico"/>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- semantic-ui -->
  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
  <script src="semantic/dist/semantic.min.js"></script>
  <!--
  <script src="bower_components/html5-boilerplate/dist/js/vendor/modernizr-2.8.3.min.js"></script>
  -->

  <!-- underscore.js -->
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>

  <link rel="stylesheet" type="text/css" href="app.css">
</head>
<body>
  <!-- Top Fixed Menu -->
  <div class="ui top fixed stackable menu" ng-app="myApp">
    <a class="item" id="left-sidebar-toggle">
      <i class="large content grey icon" style="margin: 0px;"></i>
    </a>
    <div class="ui container">
      <div style="margin-top: 10px; margin-left: 50px;" ng-controller="myAppCtrl">
        <i class="big darkRed share alternate icon"></i>
        <a href="#" class="header darkGrey appName">{{appName}}</a> - 
        <a href="#" class="header darkGrey subtitle">{{subtitle}}</a>
      </div>
    </div>
    <a href="#!/about" class="item right" >
      about
    </a>
    <a href="#!/datasetsAndGraphs" class="item right" >
      add Endpoint
    </a>
  </div>

  <!-- Left Sidebar -->
  <div class="ui wide left sidebar vertical menu">
    <!-- Accordion -->
    <div class="ui styled fluid accordion" ng-controller="contactEndpointCtrl">
      <div class="title">
        <i class="dropdown icon"></i>
        Select a SPARQL endpoint and a graph
      </div>

      <div class="active content" id="endpointandgraph">

        <div class="ui relaxed divided list">
          <h5>Select a SPARQL endpoint</h5>
          <div class="ui menu">
            <div class="ui fluid search selection dropdown" ng-click="dropdown();">
              <i class="dropdown icon" ng-click="dropdown();"></i>
              <div class="default text">Select a SPARQL endpoint</div>
                  <div class="menu">
                    <div ng-model="endpointList" class="item"
                         ng-click="selectEndpoint(endpoint)"
                         ng-repeat="endpoint in endpointList">
                      <p>{{endpoint.name}}</p>
                      <p>{{endpoint.url}}</p>
                    </div>
                </div>
              </div>
            </div>
          </div>

          <h5>Select a graph for the selected SPARQL endpoint</h5>
          <div class="ui menu">
            <div class="ui fluid search selection dropdown" ng-click="dropdown();">
              <i class="dropdown icon" ng-click="dropdown();"></i>
              <div class="default text">Select a graph</div>
              <div class="menu">
                <div ng-model="graphList" class="item"
                     ng-click="selectGraph(graph)"
                     ng-repeat="graph in graphList">
                     {{graph}}
                </div>
              </div>
            </div>
          </div>

          <div ng-if="selectedEndpointUrl!='' && selectedGraph!=''" class="bottoni">
              <button class="ui primary button" ng-click="contactSelectedEndpoint()">
                Okay
                <i class="icons">
                  <i class="database icon"></i>
                  <i class="corner search icon"></i>
                </i>
              </button>
              <button class="ui button" ng-click="restoreToDefault()">
                Discard
              </button>
          </div>
        
        <div class="ui hidden success message">
          <div class="header">
            SPARQL endpoint succesfully reached!
          </div>
          <p>You may now start query the dataset</p>
        </div>

        <div class="ui negative hidden message">
          <div class="header">
            SPARQL endpoint unreachable :(
          </div>
          <p>Try again later or choose another one</p>
        </div>

      </div> <!-- chiude <div class="active content" id="endpointandgraph">-->

      <div class="title">
        <i class="dropdown icon"></i>
        Query builder
      </div>
      <div class="content active" id="datasetInfoRichieste">

        <h5 ng-show="classes.length!=0">1) Select a Class</h5>
        <div ng-show="classes.length!=0" class="ui menu">
          <div class="ui fluid search selection dropdown" ng-click="dropdown();">
            <i class="dropdown icon" ng-click="dropdown();"></i>
            <div class="default text">Select a class</div>
            <div class="menu">
              <div ng-model="classes" class="item"
                   ng-click="selectClass(class)"
                   ng-repeat="class in classes | limitTo:totalDisplayed">
                   {{class.label}}
              </div>
              <div ng-show="classes.length>totalDisplayed" class="ui center aligned segment">
                <button class="fluid ui mini white button" ng-click="loadMore()">Load more</button>
              </div>
            </div>
          </div>
        </div>

        <div ng-show="classDatatypeProperties.length!=0" class="ui divider"></div>
        <h5 ng-show="classDatatypeProperties.length!=0 ||
            classObjectProperties.length!=0">2) Select Class Properties</h5>
        <h5 ng-show="classDatatypeProperties.length!=0">Select class datatype properties</h5>
        <div ng-show="classDatatypeProperties.length!=0" class="ui menu">
          <!--<div class="ui fluid multiple search normal selection dropdown"
            ng-click="dropdown();">-->
            <div class="ui fluid search selection dropdown"
              ng-click="dropdown();">
            <i class="dropdown icon" ng-click="dropdown();"></i>
            <div class="default text">Select class datatype properties</div>
            <div class="menu">
              <div ng-model="classDatatypeProperties" class="item"
                  ng-click="selectClassDatatypeProperty(classDatatypeProperty);"
                  ng-repeat="classDatatypeProperty in classDatatypeProperties | limitTo:totalDisplayed">
                  {{classDatatypeProperty.label}}
              </div>
              <div ng-show="classDatatypeProperties.length>totalDisplayed" class="ui center aligned segment">
                <button class="fluid ui mini white button" ng-click="loadMore()">Load more</button>
              </div>
            </div>
          </div>
        </div>
        
        
        <div ng-show="classObjectProperties.length!=0" class="ui divider"></div>
        <h5 ng-show="classObjectProperties.length!=0">Select class object properties</h5>
        <div ng-show="classObjectProperties.length!=0" class="ui menu">
          <!--<div class="ui fluid multiple search normal selection dropdown"
            ng-click="dropdown();">-->
            <div class="ui fluid search selection dropdown"
              ng-click="dropdown();">
            <i class="dropdown icon" ng-click="dropdown();"></i>
            <div class="default text">Select class object properties</div>
            <div class="menu">
              <div class="item" ng-model="classObjectProperty" class="item"
                  ng-click="selectClassObjectProperty(classObjectProperty);"
                  ng-repeat="classObjectProperty in classObjectProperties">
                  {{classObjectProperty.label}}
              </div>
              <div ng-show="classObjectProperty.length>totalDisplayed" class="ui center aligned segment">
                <button class="fluid ui mini white button" ng-click="loadMore()">Load more</button>
              </div>
            </div>
          </div>
        </div>

        <div ng-show="classDatatypeProperties.length!=0 ||
            classObjectProperties.length!=0"class="ui divider"></div>
        <div ng-show="classDatatypeProperties.length!=0 ||
            classObjectProperties.length!=0" class="ui one column centered grid">
          <button class="ui button" ng-click="queryEndpointClassProperties()">
            Query
          </button>
          <button class="ui button" ng-click="clearQueryParam()">
            Clear
          </button>
        </div>
        
          <h5 ng-model="selectedClassObjectProperties"
              ng-repeat="selectedClassObjectProperty in selectedClassObjectProperties">
              Datatype property of {{selectedClassObjectProperty.label}}
          </h5>
          <div class="ui menu" ng-show="objDatatypeProperties.length!=0">
          <div class="ui fluid search selection dropdown" ng-click="dropdown();">
            <i class="dropdown icon" ng-click="dropdown();"></i>
            <div class="default text">Select datatype property </div>
            <div class="menu">
              <div ng-model="objDatatypeProperties" class="item"
                  ng-click="selectObjDatatypeProperty(prop)"
                  ng-repeat="prop in objDatatypeProperties | limitTo:totalDisplayed">
                  {{prop.label}}
              </div>
              <div ng-show="objDatatypeProperties.length!=0" class="ui center aligned segment">
                <button class="fluid ui mini white button" ng-click="loadMore()">Load more</button>
              </div>
            </div>
          </div>
          </div>
          <h5 ng-model="selectedClassObjectProperties" ng-show="selectedClassObjectProperties.length!=0"
              ng-repeat="selectedClassObjectProperty in selectedClassObjectProperties">
              Object property of {{selectedClassObjectProperty.label}}
          </h5>
          <div class="ui menu" ng-show="objObjectProperties.length!=0">
          <div class="ui fluid search selection dropdown" ng-click="dropdown();">
            <i class="dropdown icon" ng-click="dropdown();"></i>
            <div class="default text">Select object property </div>
            <div class="menu">
              <div ng-model="objObjectProperties" class="item"
                  ng-click="selectObjObjectProperty(prop)"
                  ng-repeat="prop in objObjectProperties | limitTo:totalDisplayed">
                  {{prop.label}}
              </div>
              <div ng-show="objObjectProperties.length>totalDisplayed" 
                  class="ui center aligned segment">
                <button class="fluid ui mini white button" ng-click="loadMore()">Load more</button>
              </div>
            </div>
          </div>
        </div>
       <div ng-show="objDatatypeProperties.length!=0 ||
            objObjectProperties.length!=0" class="ui divider"></div>
        <div ng-show="objDatatypeProperties.length!=0 ||
            objObjectProperties.length!=0" class="ui one column centered grid">
          <button class="ui button" ng-click="queryEndpoint()">
            Query
          </button>
          <button class="ui button" ng-click="clearQueryParam()">
            Clear
          </button>
        </div>

      </div>

      <div class="title">
        <i class="dropdown icon"></i>
        Select data from JSON file
      </div>
      <div class="content" ng-controller="JsonCtrl">
        <div class="ui fluid action input">
          <input type="text"
            ng-init="filename='../nml-base.json'"
            ng-model="filename"></input>
          <button class="ui icon button"
            ng-click="getJSONfile()">
            <i class="search icon"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Site content -->
  <div class="pusher">
      <!--
      <ul>
        <li><a href="#!/view1">view1</a></li>
        <li><a href="#!/about">about</a></li>
        <li><a href="#!/graphvis">graphvis</a></li>
      </ul>-->
    <div class="ui internally celled grid">
      <div class="row">
        <div class="twelve wide column">

      <div class="ui secondary pointing compact menu">
        <a href="#!/graph" class="item active">
          Graph InfoViz
        </a>
        <a href="#!/cluster" class="item">
          Cluster InfoViz
        </a>
      </div>
        </div>
      </div>
    </div>

      <div ng-view></div>
      <!--
      <div ng-include="'d3Visualization/d3view.html'"></div>-->
  </div>
  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
  -->

  <script type="text/javascript">
    $(document).ready(function() {

      /*
      chiusura dei messaggi 'dismissable'
      sia success che negative
      */

      $('.message').transition('fade');

      $('.message .close')
        .on('click', function() {
          $(this)
            .closest('.message')
            .transition('fade')
          ;
        });

      $('.accordion')
        .accordion({
          selector: {
            trigger: '.title'
          },
          exclusive: false  // Disable exclusivity to allow multiple sections to be open at once.
        });

      $('.ui.left.sidebar').sidebar({
        dimPage: false,
        transition: 'push',
        exclusive: false,
        closable: false
      });

      $('.ui.left.sidebar').sidebar('attach events', '#left-sidebar-toggle');

      $('.ui.dropdown').dropdown();

      $('.ui.accordion').accordion('refresh');

      
      //
      $('.ui.secondary.pointing.menu')
        .on('click', 'a', function() { if(!$(this).hasClass('dropdown browse')) {
          $(this)
              .addClass('active')
              .closest('.ui.secondary.pointing.menu')
              .find('a')
              .not($(this))
              .removeClass('active');
          }
      });
      

    });
   

    /*
    The <script src=...> blocks the browser while 
    document.createElement('script') loads the JavaScript asynchronously
    */
  </script>
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="app.js"></script>
  <script src="menu.js"></script>
  <script src="view1/view1.js"></script>
  <script src="about/about.js"></script>
  <script src="datasetsAndGraphs/datasetsAndGraphs.js"></script>
  <script src="version/version.js"></script>
  <script src="version/version-directive.js"></script>
  <script src="version/interpolate-filter.js"></script>
  <script src="contactEndpoint/contactEndpointService.js"></script>
  <script src="contactEndpoint/contactEndpointCtrl.js"></script>
  <script src="searchableMultiselect/searchableMultiselectDirective.js"></script>
  <script src="d3Visualization/d3Service.js"></script>
  <script src="d3Visualization/d3Ctrl.js"></script>
  <script src="d3Visualization/d3ClusterDirective.js"></script>
  <script src="d3Visualization/d3GraphDirective.js"></script>
  <script src="d3Visualization/d3BarChartDirective.js"></script>
  <script src="jsonFile/getJSONfileModule.js"></script>
  <script src="queryDataset/queryDatasetModule.js"></script>
  <script src="queryDataset/queryDatasetCtrl.js"></script>
</body>
</html>
